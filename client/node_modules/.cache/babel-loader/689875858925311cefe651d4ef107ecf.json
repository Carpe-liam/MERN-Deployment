{"ast":null,"code":"import _slicedToArray from\"C:/Users/alexa/VSC/Dojo/Exams/MERN/base/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from'axios';import{useParams,useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateAuthor=function UpdateAuthor(props){var _useParams=useParams(),id=_useParams.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),firstName=_useState2[0],setFirstName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),lastName=_useState4[0],setLastName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),birthday=_useState6[0],setBirthday=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),grade=_useState8[0],setGrade=_useState8[1];var history=useHistory();//ARRAY FOR ERRORS\nvar _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),errors=_useState10[0],setErrors=_useState10[1];useEffect(function(){axios.get('http://localhost:8000/authors/'+id).then(function(res){setFirstName(res.data.firstName);setLastName(res.data.lastName);setBirthday(res.data.birthday);setGrade(res.data.grade);});},[]);var updateAuthorHandler=function updateAuthorHandler(e){e.preventDefault();var formData={firstName:firstName,lastName:lastName,birthday:birthday,grade:grade};axios.put('http://localhost:8000/authors/'+id,formData)// SUCCESS POST\n.then(function(response){console.log(response);setErrors([]);history.push('/authors');})// FAIL POST\n.catch(function(err){var errorResponse=err.response.data.errors;console.log(errorResponse);var errorArr=[];// LOOP THROUGH ALL ERRORS AND GET MESSAGES\nfor(var _i=0,_Object$keys=Object.keys(errorResponse);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];errorArr.push(errorResponse[key].message);}setErrors(errorArr);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Update Author\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:updateAuthorHandler,children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"First Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstName\",value:firstName,onChange:function onChange(e){return setFirstName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastName\",value:lastName,onChange:function onChange(e){return setLastName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Birthday:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"birthday\",value:birthday,onChange:function onChange(e){return setBirthday(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Grade:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"grade\",value:grade,onChange:function onChange(e){return setGrade(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"9\",children:\"9\"}),/*#__PURE__*/_jsx(\"option\",{value:\"10\",children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:\"11\",children:\"11\"}),/*#__PURE__*/_jsx(\"option\",{value:\"12\",children:\"12\"})]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\"})]}),errors.map(function(err,index){return/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:err},index);})]});};export default UpdateAuthor;","map":{"version":3,"sources":["C:/Users/alexa/VSC/Dojo/Exams/MERN/base/client/src/Views/UpdatePirate.jsx"],"names":["React","useEffect","useState","axios","useParams","useHistory","UpdateAuthor","props","id","firstName","setFirstName","lastName","setLastName","birthday","setBirthday","grade","setGrade","history","errors","setErrors","get","then","res","data","updateAuthorHandler","e","preventDefault","formData","put","response","console","log","push","catch","err","errorResponse","errorArr","Object","keys","key","message","target","value","map","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { useParams, useHistory } from 'react-router-dom'\r\n\r\nconst UpdateAuthor = (props) => {\r\n    const {id} = useParams()\r\n    const [firstName, setFirstName] = useState('')\r\n    const [lastName, setLastName] = useState('')\r\n    const [birthday, setBirthday] = useState('')\r\n    const [grade, setGrade] = useState('')\r\n    const history = useHistory()\r\n\r\n    //ARRAY FOR ERRORS\r\n    const [errors, setErrors] = useState([])\r\n\r\n\r\n    useEffect(() => {\r\n        axios.get('http://localhost:8000/authors/'+id)\r\n            .then(res => {\r\n                setFirstName(res.data.firstName)\r\n                setLastName(res.data.lastName)\r\n                setBirthday(res.data.birthday)\r\n                setGrade(res.data.grade)\r\n            })\r\n    }, [])\r\n\r\n    const updateAuthorHandler = e => {\r\n        e.preventDefault()\r\n\r\n        const formData = {\r\n            firstName,\r\n            lastName,\r\n            birthday,\r\n            grade\r\n        }\r\n\r\n        axios.put('http://localhost:8000/authors/'+id, formData)\r\n            // SUCCESS POST\r\n            .then(response => {\r\n                console.log(response)\r\n                setErrors([])\r\n                history.push('/authors')\r\n            })\r\n            // FAIL POST\r\n            .catch(err => {\r\n                const errorResponse  = err.response.data.errors\r\n                console.log(errorResponse)\r\n                const errorArr = []\r\n                // LOOP THROUGH ALL ERRORS AND GET MESSAGES\r\n                for (const key of Object.keys(errorResponse)) {\r\n                    errorArr.push(errorResponse[key].message)\r\n                }\r\n                setErrors(errorArr)\r\n            })\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            <hr/>\r\n            <h4>Update Author</h4>\r\n            <form onSubmit={ updateAuthorHandler }>\r\n                <p>\r\n                    <label>First Name:</label>\r\n                    <input type=\"text\" \r\n                    name=\"firstName\"\r\n                    value={firstName}\r\n                    onChange={e=> setFirstName(e.target.value)} />\r\n                </p>\r\n                <p>\r\n                    <label>Last Name:</label>\r\n                    <input type=\"text\" \r\n                    name=\"lastName\"\r\n                    value={lastName}\r\n                    onChange={e=> setLastName(e.target.value)} />\r\n                </p>\r\n                <p>\r\n                    <label>Birthday:</label>\r\n                    <input type=\"date\" name=\"birthday\" value={birthday}\r\n                    onChange={e=> setBirthday(e.target.value)} />\r\n                </p>\r\n                <p>\r\n                    <label>Grade:</label>\r\n                    <select name=\"grade\" value={grade}\r\n                    onChange={e=> setGrade(e.target.value)}>\r\n                        <option value='9' >9</option>\r\n                        <option value='10' >10</option>\r\n                        <option value='11' >11</option>\r\n                        <option value='12' >12</option>\r\n                    </select>\r\n                </p>\r\n                <input type=\"submit\" value=\"Submit\" />\r\n            </form>\r\n            {errors.map((err, index) => <p key={index} className=\"text-danger\">{err}</p>)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UpdateAuthor"]},"metadata":{},"sourceType":"module"}